# assistant/utils/categories.py
# ===============================
"""
Утилиты для работы с категориями товаров
"""

CATEGORIES_MAP = {
    # Смартфоны
    "смартфон": "смартфоны",
    "телефон": "смартфоны",
    "phone": "смартфоны",
    "айфон": "смартфоны",
    "iphone": "смартфоны",
    "samsung": "смартфоны",
    
    # Процессоры
    "процессор": "процессоры",
    "cpu": "процессоры",
    "проц": "процессоры",
    "intel": "процессоры",
    "amd": "процессоры",
    "ryzen": "процессоры",
    
    # Видеокарты
    "видеокарта": "видеокарты",
    "видюха": "видеокарты",
    "gpu": "видеокарты",
    "nvidia": "видеокарты",
    "geforce": "видеокарты",
    "rtx": "видеокарты",
    
    # Мониторы
    "монитор": "мониторы",
    "дисплей": "мониторы",
    "экран": "мониторы",
    "monitor": "мониторы",
    
    # Корпуса
    "корпус": "корпуса",
    "кейс": "корпуса",
    "case": "корпуса",
    
    # Карты памяти
    "карта памяти": "карты памяти",
    "флешка": "карты памяти",
    "sd карта": "карты памяти",
    "memory card": "карты памяти",
    
    # Блоки питания
    "блок питания": "блоки питания",
    "бп": "блоки питания",
    "psu": "блоки питания",
    "power supply": "блоки питания",
    
    # Канцтовары
    "канцтовары": "канцтовары",
    "ручка": "канцтовары",
    "тетрадь": "канцтовары",
    "карандаш": "канцтовары",
    
    # Ноутбуки
    "ноутбук": "ноутбуки",
    "ноут": "ноутбуки",
    "laptop": "ноутбуки",
    "macbook": "ноутбуки",
    
    
    "мат плата": "материнские платы",
    "материнская плата": "материнские платы",
    "плата": "материнские платы",
}

ALL_CATEGORIES = [
    "смартфоны",
    "процессоры",
    "видеокарты",
    "мониторы",
    "корпуса",
    "карты памяти",
    "блоки питания",
    "канцтовары",
    "ноутбуки"
    "материнские платы"
    "Твердотельные диски (SSD)"
]


def normalize_category(category_input: str) -> str:
    """
    Нормализация категории
    
    Args:
        category_input: строка категории от пользователя
        
    Returns:
        str: нормализованная категория или пустая строка
    """
    if not category_input:
        return ""
    
    category_lower = category_input.lower().strip()
    
    # Прямое совпадение
    if category_lower in ALL_CATEGORIES:
        return category_lower
    
    # Поиск в карте
    return CATEGORIES_MAP.get(category_lower, "")


def get_category_keywords() -> dict:
    """Получить словарь ключевых слов для каждой категории"""
    keywords = {}
    for keyword, category in CATEGORIES_MAP.items():
        if category not in keywords:
            keywords[category] = []
        keywords[category].append(keyword)
    return keywords